window.$vxp||(window.$vxp=jQuery.noConflict(!0)),window.$||window.jQuery||(window.$=window.jQuery=window.$vxp);window.$vxp||(window.$vxp=window.jQuery),undefined==window.vxpPreWait&&(window.vxpPreWait=function(n,t){jQueryWait(n,t)});if(undefined==window.jQueryWait){var jQueryWaitQueue=[],jQueryRequested=!1,jQueryReady=!1,getScript=function(n){var i=document.getElementsByTagName("head")[0],t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("src",n),i.appendChild(t)},jQueryLoaded=function(){for(var n=0;n<jQueryWaitQueue.length;n++)jQueryWaitQueue[n].func(jQueryWaitQueue[n].obj||$vxp);jQueryReady=!0};window.jQueryWait=function(n,t){if(undefined!=window.$vxp&&!jQueryRequested||jQueryReady)n(t||$vxp);else{jQueryWaitQueue.push({func:n,obj:t});if(!jQueryRequested){var i=setInterval(function(){undefined!=window.$vxp&&(clearInterval(i),jQueryLoaded())},100);jQueryRequested=!0,getScript(jQueryLocation)}}}}jQueryWait(function(n){var t={},r="",i="";n.vxpGlobal||(n.vxpGlobal={}),n.fireEvent=function(i,r,u,f,e){t[i]&&n.each(t[i],function(t,i){u&&n("#"+i.id).getConfig("targetId")!=u||f&&i.targetId&&i.targetId!=f||e&&i.groupId&&e!=i.groupId||i.callback(r)})},n.subscribeEvent=function(n,i,r,u,f){r||(r=""),t[n]=t[n]||[],t[n].push({id:r,targetId:u,groupId:f,callback:i})},n.unsubscribeEvents=function(i){for(var r in t)t[r]=n.grep(t[r],function(n){return n.id.indexOf(i)!=0})},n.cookie=function(n,t,u){var h,o,f,e,s;if("undefined"==typeof t){h=null;if(document&&document.cookie)for(o=document.cookie.split("; "),f=0;f<o.length;++f){e=o[f].split("=");if(n==e[0]){1<e.length&&(h=decodeURIComponent(o[f].substr(e[0].length+1)));break}}return h}if(n){var a=null==t?"":encodeURIComponent(t),s=u?" expires="+new Date(+new Date+u*864e5).toGMTString()+";":"",l=i!=""&&i.indexOf(".")!=-1?";Domain="+i:"",c=r;document.cookie=n+"="+a+l+";Path=/"+c+";"+s,null==t&&(s=" expires="+new Date(+new Date-864e5).toGMTString()+";",document.cookie=n+"="+a+l+";Path=/"+c+";"+s)}},n.cookieSetup=function(n,t){i=n||"",r=t||""},n.qsp=function(n){var e=window.location.href.toString(),t=e.split("?"),r,i,f,u;if(t.length==2)for(t=t[1].split("&"),r=0;r<t.length;r++){i=t[r].split("=");if(i.length==2){f=i[0],u=i[1];if(f==n)return u}}return null},n.getDomain=function(n){return n&&n.length>7&&(n=n.slice(7),n=n.split("/")[0]),n},n.getPlayType=function(){var t="qs",r=n.cookie("vidap")||n.vxpGlobal.vidap,f,i,u;return n.cookie("vidap",null),n.vxpGlobal.vidap=r,f=n.cookie("vidref"),r=="user"?t="add":r=="editor"?t="auto":r=="click"?t="pb":(i=document.referrer,u=document.location.hostname,i&&i!=""?i.indexOf(u)>=0&&(t="pb"):f&&f.indexOf(u)>=0&&(t="pb")),t},n.getPlaySource=function(){var t,u,r,i;return n.vxpGlobal.vidps||(t=n.cookie("vidps"),n.cookie("vidps",null),t||(u=n.qsp("src"),u!=null&&(t=u)),t||(r=n.qsp("from"),r!=null&&(t="link:from:"+r+":")),t||(i=document.referrer,i&&(t="link:ref:"+n.getDomain(i)+":")),t||(t="link::"),n.vxpGlobal.vidps=t),n.vxpGlobal.vidps},n.getFlightId=function(t){var r="",i;return t&&(i=parseInt(t),i>=0&&(r=t+":"+n.getFlightIdAugmentation())),r},n.getFlightIdAugmentation=function(){var r=n.cookie("vidfl"),t=n.cookie("vidusr"),i;return r&&(t=-2),t||(t=-1),i=n.getPageId(),t+":"+i},n.getPageId=function(){return n.vxpGlobal.vidpageid||(n.vxpGlobal.vidpageid=Math.floor(Math.random()*1e3)),n.vxpGlobal.vidpageid}});jQueryWait(function(n){var t,i,f=function(n){var t=-1;try{t=n.GetVariable("$version")}catch(i){}return t},u=function(n){var t=n.split(",");return{raw:n,major:parseInt(t[0].split(" ")[1],10),minor:parseInt(t[1],10),revision:parseInt(t[2],10),revisionStr:t[2]}},r=function(n){var t=n.split(" ");return{raw:n,major:parseInt(t[2].split(".")[0]),minor:parseInt(t[2].split(".")[1])}};n.hasFlash=function(n){var s,e;if(undefined==t){t=0;var o=null,h=window.navigator.plugins,i="Shockwave Flash",c=window.ActiveXObject;if(h&&h.length)o=h[i]||h[i+" 2.0"],o&&o.description&&(e=r(o.description),t=e.major+.1*e.minor);else if(c)for(i=i.replace(" ","")+".",s=15;s>2;--s)try{o=new c(i+i+s),e=u(f(o)),t=e.major+.1*e.minor;break}catch(l){}}return t>=n},n.hasHtml5=function(){if(undefined==i){var r=n("<video>").get(0)||!1;try{i=r&&n.isFunction(r.canPlayType)&&(r.canPlayType("video/mp4")=="maybe"||r.canPlayType("video/mp4")=="probably")}catch(u){i=!1}n(r).remove()}return i}});var ua=window.navigator.userAgent,isBrowserSafari=/webkit/.test(ua.toLowerCase())&&!/chrome/.test(ua.toLowerCase()),isWP7=ua.match(/windows phone/i)||ua.match(/zunewp7/i),isChrome=ua.match(/Chrome/i),IEVer=ua.match(/MSIE\s([\d.]+)/),isIPad=ua.match(/iPad/i),isBrowserIE10Tmx=IEVer&&IEVer.length>1&&IEVer[1].indexOf("10")==0&&!$vxp.hasFlash(10),isPluginsUnsupported=isBrowserIE10Tmx||isWP7||ua.match(/iPhone/i)||ua.match(/iPod/i)||ua.match(/iPad/i)||ua.match(/Android/i)||ua.match(/Silk/i)||ua.match(/BlackBerry/i);jQueryWait(function(n){n.vxpGlobal.players={},n.vxpGlobal.adapters={},n.vxpGlobal.player=function(){for(var t in n.vxpGlobal.players)return n.vxpGlobal.players[t];return null},n.vxpGlobal.playerAdapter=function(){var t=n.vxpGlobal.player();return t?t.adapter:null};var i=function(t){var u=t.param.id,i,r;for(r in n.vxpGlobal.players)n.vxpGlobal.players[r].loadContext.widgetFrameworkId==u&&(i=n.vxpGlobal.players[r]);i.loadState="loaded",n.fireEvent("playerObjectReady",null,i.id),setTimeout(function(){var n=i.loadContext.videoData;MsnVideo.sendMessage({type:"LoadVideo",param:{video:n},targetId:u}),i.loadContext.autoPlay&&MsnVideo.sendMessage({type:"PlayVideo",param:{reportingSource:n.reportingSource,playSource:n.playSource},targetId:u})},0)},t=function(){n.fireEvent("widgetFrameworkReady"),undefined!=window.MsnVideo2&&(window.MsnVideo=window.MsnVideo2),undefined!=MsnVideo.addMessageReceiver&&MsnVideo.addMessageReceiver({eventType:"widgetLoaded",widgetId:"adapter",funcCb:i})};window.MsnVideo2?t():window.MsnVideoInitialize=window.MsnVideoInitialize2=function(){t()},n.embedMsnPlayer=function(t,i,r){function v(){f?(n("#"+t).parents(".vxp_player").attr("data-playerAdapter","MsnFlash"),n("#"+t).parents(".vxp_videoModule").addClass("flash"),n("#"+t)[0].innerHTML=r,n.vxpGlobal.players[i.playerId].loadState="loading",n.vxpGlobal.players[i.playerId].type="msn:flash",n.vxpGlobal.players[i.playerId].controlBarHeight=0):(n.vxpGlobal.players[i.playerId].loadState="install:flash",n("#"+t).html(n.vxpGlobal.players[i.playerId].loadContext.flashInstallHtml))}function p(){var e,f,u,r,h,s,o;if(typeof VxpVideoPlayer!="undefined"){e={};if(i.adDivs)for(f=i.adDivs.split(";"),u=0;u<f.length;u++)r=f[u].split(","),r.length!=3&&(r=f[u].split("|")),r.length==3&&(h=r[1]+"x"+r[2],e[h]=r[0]);return s={LeadWith:i.playerLeadWith,Video:i.videoData,WidgetId:i.widgetFrameworkId,AdDiv:e,CanSkipAds:i.CanSkipAds,SkipAdsSeconds:i.SkipAdsSeconds,EnableSharing:i.EnableSharing,EnableInfoPane:i.EnableInfoPane,AdChoicesLightImageUrl:i.adChoicesLightImageUrl,AdChoicesDarkImageUrl:i.adChoicesDarkImageUrl,AdChoicesThemeImageUrl:i.adChoicesThemeImageUrl,AdChoicesInfoUrl:i.adChoicesInfoUrl,QualitySwitchSelector:".vxp_playerControls_qualitySwitch",AutoPlay:i.autoPlay,QualityOverride:i.qualityOverride,UseHLS:i.HTML5UseHLS,LogoUrl:unescape(i.logoUrl),PopLink:i.popLink,LogoPopup:i.logoPopup,ShowLogo:i.showLogo,ShowTitle:i.showTitle,ShowQuality:i.ShowQuality,PlayerAspectRatio4x3:i.playerAspectRatio4x3,Mute:i.mute,CCCultureInfo:unescape(i.CCCultureInfo),CCSvcUri:unescape(i.CCSvcUri),ShowRelatedVideosInPlayer:i.showRelatedVideosInPlayer,UseWindowedMode:i.useWindowedMode,VCConfig:{Market:i.vcvideomarket,SvcDomain:i.videoCatalogDomain,SecuredSvcDomain:i.videoSecuredCatalogDomain,ConsumerSvcEdges:i.videoCatalogEdgeDomains,ImageSvcEdges:i.videoImageServiceEdgeDomains,SecuredConsumerSvcEdges:i.videoSecuredCatalogEdgeDomains,SecuredImageSvcEdges:i.videoSecuredImageServiceEdgeDomains,SecuredContentSvcEdges:i.videoSecuredContentServiceEdgeDomains,RelatedVideoAlgorithm:i.relatedVideoAlgorithm,RelatedVideosQueryOverride:unescape(i.relatedVideosQueryOverride),LinkOverride:unescape(i.linkOverride),LinkBack:unescape(i.linkBack)},ReportingConfig:{Market:i.market,Fr:unescape(i.reportingFr),Brand:i.brand,Ors:"msnportal"+i.market.replace("-","")+"video",PlayType:i.videoData.reportingSource,ReportType:i.reportingType,PlaySource:i.videoData.playSource,DomainId:i.udcDomainId,FlightId:n.getFlightId(i.flightId),ApReportingEnabled:i.ApReportingEnabled,ApReportingService:unescape(i.ApReportingService),UdcEnabled:i.UdcEnabled,UdcUrl:unescape(i.UdcUrl),MarketReportSuite:unescape(i.MarketReportSuite),OmnitureReportingPercentage:i.OmnitureReportingPercentage},AdConfig:{PolicyType:i.HTML5AdPolicy,SvcUri:i.HTML5AdServiceUrl,SvcType:i.HTML5AdServiceType,ProxySvcUri:i.HTML5AdProxyServiceUrl,AdBitrate:i.AdBitrate,AdTimeout:i.HTML5AdEventTimeout,FullAdSponsorshipPolicy:i.HTML5AdFullExperience,PartialAdSponsorshipPolicy:i.HTML5AdPartialExperience,TimeElapsed:i.HTML5AdTriggerTimePlaying,VideosPlayedNoAds:i.HTML5AdTriggerVideosPlayedNoAds,VisitorTargetingService:unescape(i.VisitorTargetingService),AdProvider:unescape(i.AdProvider),UseFWAdManager:unescape(i.UseFWAdManager),FWAdManagerLocation:unescape(i.FWAdManagerLocation),FWJSAdManagerLocation:unescape(i.FWJSAdManagerLocation),FWServer:unescape(i.FWServer),FWNetworkId:unescape(i.FWNetworkId),FWProfile:unescape(i.FWProfileHTML5),FWFlashProfile:unescape(i.FWProfileFlash),FWSiteSectionId:i.FWSiteSectionId,FWSiteSectionIds:unescape(i.FWSiteSectionIds),FWCacheBuster:unescape(i.FWCacheBuster)},InfoPaneConfig:{ShowRating:i.ShowRating,ShowRelatedLinks:i.ShowRelatedLinks},SharePaneConfig:{ShowFacebook:i.ShowFacebook,ShowTwitter:i.ShowTwitter,ShowLinkedin:i.ShowLinkedin,ShowEmail:i.ShowEmail,ShowPermalink:i.ShowPermalink,ShowEmbedCode:i.ShowEmbedCode,ShowPlayerSize:i.ShowPlayerSize,OpenGraphServiceUrl:unescape(i.OpenGraphServiceUrl),IFrameEmbedFormat:unescape(i.IFrameEmbedFormat)},EndSlateConfig:{ShowShare:i.endslateShowShare,ShowRelatedLink:i.endslateShowRelatedLink,ShowRelatedVideos:i.endslateShowRelatedVideos,ShowMoreVideosLink:i.endslateShowMoreVideosLink,ShowAd:i.endslateShowAd,RelatedVideosTitle:unescape(i.relatedVideosTitle)}},o=n("#"+t).parents(".vxp_player"),o.attr("data-playerAdapter","MsnHtml5"),createVxPlayer(t,null,s,"html5"),n.vxpGlobal.players[i.playerId].id=i.playerId,n.vxpGlobal.players[i.playerId].type="msn:html5",n.vxpGlobal.players[i.playerId].controlBarHeight=0,!0}return!1}function nt(r){var f=n.vxpGlobal.players[i.playerId].loadContext.videoData,e=r?"http://extreme.mobile.msn.com/video/watch/"+f.uuid:f.playerUrl,u=n("#"+t);u.html(n.vxpGlobal.players[i.playerId].loadContext.leadWithImageHtml),u.find("a").attr("href",e)}function tt(){n("#"+t).text(i.errorNoPromptMsg)}var h,k,s;for(n.vxpGlobal.players[i.playerId]={},n.vxpGlobal.players[i.playerId].loadContext=i,n.vxpGlobal.players[i.playerId].id=i.playerId,h=n.qsp("from")||n.cookie("from")||"",r=r.replace("vxpfromreplace",h),i.linkOverride&&(i.linkOverride=i.linkOverride.replace("vxpfromreplace",h)),k=n.getFlightIdAugmentation(),s=0;s<2;s++)r=r.replace("vxpbucketreplace",k);i.videoData.reportingSource=n.getPlayType(),i.videoData.playSource=n.getPlaySource();var d=!1,g=!1,u=window.navigator.userAgent;n("meta").each(function(t,i){var u=i.httpEquiv,r=n(i).attr("content");u&&r&&(u=u.toLowerCase(),r=r.toLowerCase(),u=="x-ua-compatible"&&(r=="ie=7"||r=="ie=8")&&(g=!0))});var f=n.hasFlash(i.flashVersion),o=n.hasHtml5(),b=/webkit/.test(u.toLowerCase())&&!/chrome/.test(u.toLowerCase()),it=/chrome/.test(u.toLowerCase()),rt=/firefox/.test(u.toLowerCase()),e=/MSIE (\d+\.\d+)/.test(u)?new Number(RegExp.$1):/Trident.*rv:(\d+\.\d+)/.test(u)?new Number(RegExp.$1):0,w=e>=10&&!f,a=/iphone/.test(u.toLowerCase())||/ipod/.test(u.toLowerCase())||/ipad/.test(u.toLowerCase()),l=/windows phone/.test(u.toLowerCase())&&e<10||/zunewp7/.test(u.toLowerCase()),c=w||l||a||/android/.test(u.toLowerCase())||/silk/.test(u.toLowerCase())||/blackberry/.test(u.toLowerCase()),ut=/mac/.test(u.toLowerCase()),y=i.h264Available||a&&i.hlsAvailable&&i.HTML5UseHLS;o&&(!f||c)&&(i.promptMode="forcehtml5"),(i.isBing&&b||w)&&(d=!0),b&&ut&&i.flashAvailable&&i.promptMode!="forcehtml5"&&(i.promptMode="forceflash");if(l){nt(!0);return}if(e&&g&&!(f||o)){nt(!1);return}i.promptMode=="forcehtml5"&&!y&&c?(n.vxpGlobal.players[i.playerId].loadState="install:flash",n("#"+t).html(n.vxpGlobal.players[i.playerId].loadContext.notAvailableOnDeviceHtml),n.pageIsReady?setTimeout(function(){n.fireEvent("countdownComplete")},0):n.subscribeEvent("pageReady",function(){n.fireEvent("countdownComplete")})):(i.promptMode=="forcehtml5"||i.playerLeadWith=="html5")&&y&&o?p()||n.getScript(i.html5PlayerScriptSrc,function(){p()}):i.promptMode=="forceflash"||i.flashAvailable&&(f||!d)||it||rt?v():i.promptMode=="forceflash"&&f&&i.flashAvailable?v():(tt(),n.pageIsReady?setTimeout(function(){n.fireEvent("countdownComplete")},0):n.subscribeEvent("pageReady",function(){n.fireEvent("countdownComplete")}))}});