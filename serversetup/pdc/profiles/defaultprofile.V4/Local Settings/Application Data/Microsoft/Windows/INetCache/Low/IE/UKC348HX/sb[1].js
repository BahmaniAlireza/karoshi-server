/*!
 * Sunblock - Europe's most powerful ad verification platform
 *
 * @description JavaScript tracker for Sunblock
 * @version     1.1.1
 * @author      Alex Dean, Simon Andersson, Anthon Pang
 * @copyright   Anthon Pang, Sunblock Analytics Ltd
 * @license     Simplified BSD
 */
if(!this.JSON2){this.JSON2={}}(function(){function d(f){return f<10?"0"+f:f}function l(n,m){var f=Object.prototype.toString.apply(n);if(f==="[object Date]"){return isFinite(n.valueOf())?n.getUTCFullYear()+"-"+d(n.getUTCMonth()+1)+"-"+d(n.getUTCDate())+"T"+d(n.getUTCHours())+":"+d(n.getUTCMinutes())+":"+d(n.getUTCSeconds())+"Z":null}if(f==="[object String]"||f==="[object Number]"||f==="[object Boolean]"){return n.valueOf()}if(f!=="[object Array]"&&typeof n.toJSON==="function"){return n.toJSON(m)}return n}var c=new RegExp("[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]","g"),e='\\\\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]',i=new RegExp("["+e,"g"),j,b,k={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},h;
function a(f){i.lastIndex=0;return i.test(f)?'"'+f.replace(i,function(m){var n=k[m];return typeof n==="string"?n:"\\u"+("0000"+m.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+f+'"'}function g(s,p){var n,m,t,f,q=j,o,r=p[s];if(r&&typeof r==="object"){r=l(r,s)}if(typeof h==="function"){r=h.call(p,s,r)}switch(typeof r){case"string":return a(r);case"number":return isFinite(r)?String(r):"null";case"boolean":case"null":return String(r);case"object":if(!r){return"null"}j+=b;o=[];if(Object.prototype.toString.apply(r)==="[object Array]"){f=r.length;for(n=0;n<f;n+=1){o[n]=g(n,r)||"null"}t=o.length===0?"[]":j?"[\n"+j+o.join(",\n"+j)+"\n"+q+"]":"["+o.join(",")+"]";j=q;return t}if(h&&typeof h==="object"){f=h.length;for(n=0;n<f;n+=1){if(typeof h[n]==="string"){m=h[n];t=g(m,r);if(t){o.push(a(m)+(j?": ":":")+t)}}}}else{for(m in r){if(Object.prototype.hasOwnProperty.call(r,m)){t=g(m,r);if(t){o.push(a(m)+(j?": ":":")+t)}}}}t=o.length===0?"{}":j?"{\n"+j+o.join(",\n"+j)+"\n"+q+"}":"{"+o.join(",")+"}";j=q;
return t}}if(typeof JSON2.stringify!=="function"){JSON2.stringify=function(o,m,n){var f;j="";b="";if(typeof n==="number"){for(f=0;f<n;f+=1){b+=" "}}else{if(typeof n==="string"){b=n}}h=m;if(m&&typeof m!=="function"&&(typeof m!=="object"||typeof m.length!=="number")){throw new Error("JSON.stringify")}return g("",{"":o})}}if(typeof JSON2.parse!=="function"){JSON2.parse=function(o,f){var n;function m(s,r){var q,p,t=s[r];if(t&&typeof t==="object"){for(q in t){if(Object.prototype.hasOwnProperty.call(t,q)){p=m(t,q);if(p!==undefined){t[q]=p}else{delete t[q]}}}}return f.call(s,r,t)}o=String(o);c.lastIndex=0;if(c.test(o)){o=o.replace(c,function(p){return"\\u"+("0000"+p.charCodeAt(0).toString(16)).slice(-4)})}if((new RegExp("^[\\],:{}\\s]*$")).test(o.replace(new RegExp('\\\\(?:["\\\\/bfnrt]|u[0-9a-fA-F]{4})',"g"),"@").replace(new RegExp('"[^"\\\\\n\r]*"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?',"g"),"]").replace(new RegExp("(?:^|:|,)(?:\\s*\\[)+","g"),""))){n=eval("("+o+")");
return typeof f==="function"?m({"":n},""):n}throw new SyntaxError("JSON.parse")}}}());(function(a){var b=(function(){var f="s",g=function(j){var k=-j.getTimezoneOffset();return(k!==null?k:0)},c=function(){return g(new Date(2010,0,1,0,0,0,0))},e=function(){return g(new Date(2010,5,1,0,0,0,0))},h=function(k){var l=((k.getMonth()>5?e():c())),j=g(k);return(l-j)!==0},i=function(){var j=c(),k=e(),l=c()-e();if(l<0){return j+",1"}else{if(l>0){return k+",1,"+f}}return j+",0"},d=function(){var j=i();return new b.TimeZone(b.olson.timezones[j])};return{determine_timezone:function(){if(typeof console!=="undefined"){console.log("jstz.determine_timezone() is deprecated and will be removed in an upcoming version. Please use jstz.determine() instead.")}return d()},determine:d,date_is_dst:h}}());b.TimeZone=function(c){var e=null,d=function(){return e},g=function(){var h=b.olson.ambiguity_list[e],k=h.length,j=0,l=h[0];for(;j<k;j+=1){l=h[j];if(b.date_is_dst(b.olson.dst_start_dates[l])){e=l;return}}},f=function(){return typeof(b.olson.ambiguity_list[e])!=="undefined"
};e=c;if(f()){g()}return{name:d}};b.olson={};b.olson.timezones={"-720,0":"Etc/GMT+12","-660,0":"Pacific/Pago_Pago","-600,1":"America/Adak","-600,0":"Pacific/Honolulu","-570,0":"Pacific/Marquesas","-540,0":"Pacific/Gambier","-540,1":"America/Anchorage","-480,1":"America/Los_Angeles","-480,0":"Pacific/Pitcairn","-420,0":"America/Phoenix","-420,1":"America/Denver","-360,0":"America/Guatemala","-360,1":"America/Chicago","-360,1,s":"Pacific/Easter","-300,0":"America/Bogota","-300,1":"America/New_York","-270,0":"America/Caracas","-240,1":"America/Halifax","-240,0":"America/Santo_Domingo","-240,1,s":"America/Asuncion","-210,1":"America/St_Johns","-180,1":"America/Godthab","-180,0":"America/Argentina/Buenos_Aires","-180,1,s":"America/Montevideo","-120,0":"America/Noronha","-120,1":"Etc/GMT+2","-60,1":"Atlantic/Azores","-60,0":"Atlantic/Cape_Verde","0,0":"Etc/UTC","0,1":"Europe/London","60,1":"Europe/Berlin","60,0":"Africa/Lagos","60,1,s":"Africa/Windhoek","120,1":"Asia/Beirut","120,0":"Africa/Johannesburg","180,1":"Europe/Moscow","180,0":"Asia/Baghdad","210,1":"Asia/Tehran","240,0":"Asia/Dubai","240,1":"Asia/Yerevan","270,0":"Asia/Kabul","300,1":"Asia/Yekaterinburg","300,0":"Asia/Karachi","330,0":"Asia/Kolkata","345,0":"Asia/Kathmandu","360,0":"Asia/Dhaka","360,1":"Asia/Omsk","390,0":"Asia/Rangoon","420,1":"Asia/Krasnoyarsk","420,0":"Asia/Jakarta","480,0":"Asia/Shanghai","480,1":"Asia/Irkutsk","525,0":"Australia/Eucla","525,1,s":"Australia/Eucla","540,1":"Asia/Yakutsk","540,0":"Asia/Tokyo","570,0":"Australia/Darwin","570,1,s":"Australia/Adelaide","600,0":"Australia/Brisbane","600,1":"Asia/Vladivostok","600,1,s":"Australia/Sydney","630,1,s":"Australia/Lord_Howe","660,1":"Asia/Kamchatka","660,0":"Pacific/Noumea","690,0":"Pacific/Norfolk","720,1,s":"Pacific/Auckland","720,0":"Pacific/Tarawa","765,1,s":"Pacific/Chatham","780,0":"Pacific/Tongatapu","780,1,s":"Pacific/Apia","840,0":"Pacific/Kiritimati"};
b.olson.dst_start_dates={"America/Denver":new Date(2011,2,13,3,0,0,0),"America/Mazatlan":new Date(2011,3,3,3,0,0,0),"America/Chicago":new Date(2011,2,13,3,0,0,0),"America/Mexico_City":new Date(2011,3,3,3,0,0,0),"Atlantic/Stanley":new Date(2011,8,4,7,0,0,0),"America/Asuncion":new Date(2011,9,2,3,0,0,0),"America/Santiago":new Date(2011,9,9,3,0,0,0),"America/Campo_Grande":new Date(2011,9,16,5,0,0,0),"America/Montevideo":new Date(2011,9,2,3,0,0,0),"America/Sao_Paulo":new Date(2011,9,16,5,0,0,0),"America/Los_Angeles":new Date(2011,2,13,8,0,0,0),"America/Santa_Isabel":new Date(2011,3,5,8,0,0,0),"America/Havana":new Date(2011,2,13,2,0,0,0),"America/New_York":new Date(2011,2,13,7,0,0,0),"Asia/Gaza":new Date(2011,2,26,23,0,0,0),"Asia/Beirut":new Date(2011,2,27,1,0,0,0),"Europe/Minsk":new Date(2011,2,27,2,0,0,0),"Europe/Helsinki":new Date(2011,2,27,4,0,0,0),"Europe/Istanbul":new Date(2011,2,28,5,0,0,0),"Asia/Damascus":new Date(2011,3,1,2,0,0,0),"Asia/Jerusalem":new Date(2011,3,1,6,0,0,0),"Africa/Cairo":new Date(2010,3,30,4,0,0,0),"Asia/Yerevan":new Date(2011,2,27,4,0,0,0),"Asia/Baku":new Date(2011,2,27,8,0,0,0),"Pacific/Auckland":new Date(2011,8,26,7,0,0,0),"Pacific/Fiji":new Date(2010,11,29,23,0,0,0),"America/Halifax":new Date(2011,2,13,6,0,0,0),"America/Goose_Bay":new Date(2011,2,13,2,1,0,0),"America/Miquelon":new Date(2011,2,13,5,0,0,0),"America/Godthab":new Date(2011,2,27,1,0,0,0)};
b.olson.ambiguity_list={"America/Denver":["America/Denver","America/Mazatlan"],"America/Chicago":["America/Chicago","America/Mexico_City"],"America/Asuncion":["Atlantic/Stanley","America/Asuncion","America/Santiago","America/Campo_Grande"],"America/Montevideo":["America/Montevideo","America/Sao_Paulo"],"Asia/Beirut":["Asia/Gaza","Asia/Beirut","Europe/Minsk","Europe/Helsinki","Europe/Istanbul","Asia/Damascus","Asia/Jerusalem","Africa/Cairo"],"Asia/Yerevan":["Asia/Yerevan","Asia/Baku"],"Pacific/Auckland":["Pacific/Auckland","Pacific/Fiji"],"America/Los_Angeles":["America/Los_Angeles","America/Santa_Isabel"],"America/New_York":["America/Havana","America/New_York"],"America/Halifax":["America/Goose_Bay","America/Halifax"],"America/Godthab":["America/Miquelon","America/Godthab"]};if(typeof exports!=="undefined"){exports.jstz=b}else{a.jstz=b}})(this);var _sblq=_sblq||[];var Sunblock=Sunblock||function(){var a=window;return{clientVersion:"1.2.1",apiMajorVersion:"1",expireDateTime:null,plugins:{},hasLoaded:false,registeredOnLoadHandlers:[],documentAlias:document,windowAlias:a,navigatorAlias:navigator,screenAlias:screen,encodeWrapper:a.encodeURIComponent,decodeWrapper:a.decodeURIComponent,decodeUrl:unescape,asyncTracker:null}
}();Sunblock.isDefined=function(a){return typeof a!=="undefined"};Sunblock.isFunction=function(a){return typeof a==="function"};Sunblock.isArray=("isArray" in Array)?Array.isArray:function(a){return Object.prototype.toString.call(a)==="[object Array]"};Sunblock.isEmptyArray=function(a){return Sunblock.isArray(a)&&a.length<1};Sunblock.isObject=function(a){return typeof a==="object"};Sunblock.isString=function(a){return typeof a==="string"||a instanceof String};Sunblock.isDate=function(a){return Object.prototype.toString.call(a)==="[object Date]"};Sunblock.encodeUtf8=function(a){return Sunblock.decodeUrl(Sunblock.encodeWrapper(a))};Sunblock.fixupTitle=function(b){if(!Sunblock.isString(b)){b=b.text||"";var a=Sunblock.documentAlias.getElementsByTagName("title");if(a&&Sunblock.isDefined(a[0])){b=a[0].text}}return b};Sunblock.getHostName=function(a){var c=new RegExp("^(?:(?:https?|ftp):)/*(?:[^@]+@)?([^:/#]+)"),b=c.exec(a);return b?b[1]:a};Sunblock.getPropertySuffix=function(b){var c=new RegExp("\\$(.[^\\$]+)$"),a=c.exec(b);
if(a){return a[1]}};Sunblock.hasSessionStorage=function(){try{return !!Sunblock.windowAlias.sessionStorage}catch(a){return true}};Sunblock.hasLocalStorage=function(){try{return !!Sunblock.windowAlias.localStorage}catch(a){return true}};Sunblock.toTimestamp=function(b,a){return a?b/1:Math.floor(b/1000)};Sunblock.toDatestamp=function(a){return Math.floor(a/86400000)};Sunblock.translateDateValue=function(a,b){switch(b){case"tms":return Sunblock.toTimestamp(a,true);case"ts":return Sunblock.toTimestamp(a,false);case"dt":return Sunblock.toDatestamp(a);default:return a}};Sunblock.fixupUrl=function(d,a,b){function c(i,h){var l=new RegExp("^(?:https?|ftp)(?::/*(?:[^?]+)[?])([^#]+)"),k=l.exec(i),j=new RegExp("(?:^|&)"+h+"=([^&]*)"),g=k?j.exec(k[1]):0;return g?Sunblock.decodeWrapper(g[1]):""}if(d==="translate.googleusercontent.com"){if(b===""){b=a}a=c(a,"u");d=Sunblock.getHostName(a)}else{if(d==="cc.bingj.com"||d==="webcache.googleusercontent.com"||d.slice(0,5)==="74.6."){a=Sunblock.documentAlias.links[0].href;
d=Sunblock.getHostName(a)}}return[d,a,b]};Sunblock.fixupDomain=function(b){var a=b.length;if(b.charAt(--a)==="."){b=b.slice(0,a)}if(b.slice(0,2)==="*."){b=b.slice(1)}return b};Sunblock.getReferrer=function(){var a="";try{a=Sunblock.windowAlias.top.document.referrer}catch(c){if(Sunblock.windowAlias.parent){try{a=Sunblock.windowAlias.parent.document.referrer}catch(b){a=""}}}if(a===""){a=Sunblock.documentAlias.referrer}return a};Sunblock.addEventListener=function(d,c,b,a){if(d.addEventListener){d.addEventListener(c,b,a);return true}else{if(d.attachEvent){return d.attachEvent("on"+c,b)}else{var f="on"+c;if(typeof d[f]==="function"){b=(function(e,g){return function(){e.apply(this,arguments);g.apply(this,arguments)}})(d[f],b)}d[f]=b;return true}}};Sunblock.removeEventListener=function(d,c,b,a){if(d.removeEventListener){d.removeEventListener(c,b,a)}else{if(d.detachEvent){d.detachEvent("on"+c,b)}}};Sunblock.getCookie=function(c){var a=new RegExp("(^|;)[ ]*"+c+"=([^;]*)"),b=a.exec(Sunblock.documentAlias.cookie);
return b?Sunblock.decodeWrapper(b[2]):0};Sunblock.setCookie=function(g,d,c,f,b,e){var a;if(c){a=new Date();a.setTime(a.getTime()+c)}Sunblock.documentAlias.cookie=g+"="+Sunblock.encodeWrapper(d)+(c?";expires="+a.toGMTString():"")+";path="+(f||"/")+(b?";domain="+b:"")+(e?";secure":"")};Sunblock.executePluginMethod=function(b,e){var a="",d,c;for(d in Sunblock.plugins){if(Object.prototype.hasOwnProperty.call(Sunblock.plugins,d)){c=Sunblock.plugins[d][b];if(Sunblock.isFunction(c)){a+=c(e)}}}return a};Sunblock.sha1=function sha1(r){var c=function(j,i){return(j<<i)|(j>>>(32-i))},s=function(z){var y="",w,j;for(w=7;w>=0;w--){j=(z>>>(w*4))&15;y+=j.toString(16)}return y},f,u,t,b=[],l=1732584193,h=4023233417,g=2562383102,e=271733878,d=3285377520,q,p,o,n,m,v,a,k=[];r=Sunblock.encodeUtf8(r);a=r.length;for(u=0;u<a-3;u+=4){t=r.charCodeAt(u)<<24|r.charCodeAt(u+1)<<16|r.charCodeAt(u+2)<<8|r.charCodeAt(u+3);k.push(t)}switch(a&3){case 0:u=2147483648;break;case 1:u=r.charCodeAt(a-1)<<24|8388608;break;case 2:u=r.charCodeAt(a-2)<<24|r.charCodeAt(a-1)<<16|32768;
break;case 3:u=r.charCodeAt(a-3)<<24|r.charCodeAt(a-2)<<16|r.charCodeAt(a-1)<<8|128;break}k.push(u);while((k.length&15)!==14){k.push(0)}k.push(a>>>29);k.push((a<<3)&4294967295);for(f=0;f<k.length;f+=16){for(u=0;u<16;u++){b[u]=k[f+u]}for(u=16;u<=79;u++){b[u]=c(b[u-3]^b[u-8]^b[u-14]^b[u-16],1)}q=l;p=h;o=g;n=e;m=d;for(u=0;u<=19;u++){v=(c(q,5)+((p&o)|(~p&n))+m+b[u]+1518500249)&4294967295;m=n;n=o;o=c(p,30);p=q;q=v}for(u=20;u<=39;u++){v=(c(q,5)+(p^o^n)+m+b[u]+1859775393)&4294967295;m=n;n=o;o=c(p,30);p=q;q=v}for(u=40;u<=59;u++){v=(c(q,5)+((p&o)|(p&n)|(o&n))+m+b[u]+2400959708)&4294967295;m=n;n=o;o=c(p,30);p=q;q=v}for(u=60;u<=79;u++){v=(c(q,5)+(p^o^n)+m+b[u]+3395469782)&4294967295;m=n;n=o;o=c(p,30);p=q;q=v}l=(l+q)&4294967295;h=(h+p)&4294967295;g=(g+o)&4294967295;e=(e+n)&4294967295;d=(d+m)&4294967295}v=s(l)+s(h)+s(g)+s(e)+s(d);return v.toLowerCase()};Sunblock.murmurhash3_32_gc=function murmurhash3_32_gc(k,f){var l,m,h,b,e,a,c,j,g,d;l=k.length&3;m=k.length-l;h=f;e=3432918353;c=461845907;d=0;while(d<m){g=((k.charCodeAt(d)&255))|((k.charCodeAt(++d)&255)<<8)|((k.charCodeAt(++d)&255)<<16)|((k.charCodeAt(++d)&255)<<24);
++d;g=((((g&65535)*e)+((((g>>>16)*e)&65535)<<16)))&4294967295;g=(g<<15)|(g>>>17);g=((((g&65535)*c)+((((g>>>16)*c)&65535)<<16)))&4294967295;h^=g;h=(h<<13)|(h>>>19);b=((((h&65535)*5)+((((h>>>16)*5)&65535)<<16)))&4294967295;h=(((b&65535)+27492)+((((b>>>16)+58964)&65535)<<16))}g=0;switch(l){case 3:g^=(k.charCodeAt(d+2)&255)<<16;case 2:g^=(k.charCodeAt(d+1)&255)<<8;case 1:g^=(k.charCodeAt(d)&255);g=(((g&65535)*e)+((((g>>>16)*e)&65535)<<16))&4294967295;g=(g<<15)|(g>>>17);g=(((g&65535)*c)+((((g>>>16)*c)&65535)<<16))&4294967295;h^=g}h^=k.length;h^=h>>>16;h=(((h&65535)*2246822507)+((((h>>>16)*2246822507)&65535)<<16))&4294967295;h^=h>>>13;h=((((h&65535)*3266489909)+((((h>>>16)*3266489909)&65535)<<16)))&4294967295;h^=h>>>16;return h>>>0};Sunblock.base64encode=function(j){if(!j){return j}if(typeof window.btoa=="function"){return btoa(j)}var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var d,c,b,n,m,l,k,o,h=0,p=0,g="",f=[];do{d=j.charCodeAt(h++);c=j.charCodeAt(h++);b=j.charCodeAt(h++);
o=d<<16|c<<8|b;n=o>>18&63;m=o>>12&63;l=o>>6&63;k=o&63;f[p++]=e.charAt(n)+e.charAt(m)+e.charAt(l)+e.charAt(k)}while(h<j.length);g=f.join("");var a=j.length%3;return(a?g.slice(0,a-3):g)+"===".slice(a||3)};Sunblock.base64urlencode=function(b){if(!b){return b}var a=Sunblock.base64encode(b);return a.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")};Sunblock.base64decode=function(e){var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var b="";var m,k,h="";var l,j,g,f="";var d=0;var a=/[^A-Za-z0-9\+\/\=]/g;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{l=c.indexOf(e.charAt(d++));j=c.indexOf(e.charAt(d++));g=c.indexOf(e.charAt(d++));f=c.indexOf(e.charAt(d++));m=(l<<2)|(j>>4);k=((j&15)<<4)|(g>>2);h=((g&3)<<6)|f;b=b+String.fromCharCode(m);if(g!=64){b=b+String.fromCharCode(k)}if(f!=64){b=b+String.fromCharCode(h)}m=k=h="";l=j=g=f=""}while(d<e.length);return unescape(b)};Sunblock.detectBlindIframe=function(){return Sunblock.windowAlias.top!==Sunblock.windowAlias.self};Sunblock.getTopPageUri=function(){try{var a=Sunblock.windowAlias.top.location.href||Sunblock.windowAlias.location.href;
return a}catch(b){return null}};Sunblock.newSlotDb=function(){var b={};var a=function(f){if(!Sunblock.isDefined(b[f])){b[f]={}}};var d=function(h,f,g){a(h);if(!Sunblock.isDefined(b[h][f])){b[h][f]=g}};var e=function(h,f,g){a(h);b[h][f]=g;return g};var c=function(g,f){return b[g][f]};return{set:e,get:c,getOrElse:function(i,h,g){var f=c(i,h);return(Sunblock.isDefined(f)?f:g)},incr:function(h,g){d(h,g,0);var f=c(h,g)+1;return e(h,g,f)}}};Sunblock.removeFromArray=function(c,b){for(var a=c.length-1;a>=0;a--){if(c[a]===b){c.splice(a,1)}}return c};Sunblock.whenDocumentReadyOr=function(b,c,d){if(b){d()}else{var a=function(){if(document.readyState==="complete"){d()}else{setTimeout(a,c)}};a()}};Sunblock.hasCorsPost=function(){return(typeof XMLHttpRequest!=="undefined"&&"withCredentials" in new XMLHttpRequest())};Sunblock.sendRequest=function(b,c,e,f){if(b.match(/^\/\//)){var d=document.location.protocol=="https:"?"https:":"http:";b=d+b}if(Sunblock.hasCorsPost()&&!window.MSStream){var a=(e)?Sunblock.wrapWithJsonExtractor(f):f;
Sunblock.sendCorsPostRequest(b,c,a)}else{Sunblock.sendJsonpGetRequest(b,c,f)}};Sunblock.sendCorsPostRequest=function(a,b,d){var c=Sunblock.buildCorsRequest(a,"POST");if(c){if(d&&Sunblock.isFunction(d)){c.onreadystatechange=function(){if(c.readyState===4){d(c)}}}c.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");c.send(b)}};Sunblock.wrapWithJsonExtractor=function(a){if(a&&Sunblock.isFunction(a)){return function(){if(arguments.length>0&&"responseText" in arguments[0]){try{arguments[0]=JSON2.parse(arguments[0].responseText)}catch(b){console.error("Could not parse XMLHttpRequest responseText ["+arguments[0].responseText+"] as JSON");throw b}}a.apply(null,arguments)}}else{return null}};Sunblock.sendJsonpGetRequest=function(b,d,g){var e=Sunblock.nameJsonpCallback();var f=Sunblock.buildJsonpRequest(b,d,e);var a=document.createElement("script");a.src=f;a.async=true;a.className="sb-jsonp";a.onerror=function(){c()};function c(){if(a.parentNode){a.parentNode.removeChild(a)
}if(g in Sunblock.windowAlias){delete Sunblock.windowAlias[g]}}Sunblock.windowAlias[e]=function(){c();g.apply(null,arguments)};Sunblock.documentAlias.getElementsByTagName("script")[0].parentNode.appendChild(a)};Sunblock.nameJsonpCallback=function(){return"sb_jsonp_"+Math.random().toString(36).substring(2)};Sunblock.buildCorsRequest=function(a,c){var b=new XMLHttpRequest();if("withCredentials" in b){b.open(c,a,true);b.withCredentials=true}else{b=null}return b};Sunblock.buildJsonpRequest=function(a,b,c){return a+"?"+b+"&callback="+c};Sunblock.calculateDuration=function(b,a){a=typeof a!=="undefined"?a:new Date().getTime();return a-b};Sunblock.safeConcat=function(a){if(a instanceof Array){return a}else{return[]}};Sunblock.elementIdInView=function(a){var b=Sunblock.documentAlias.getElementById(a);return Sunblock.elementInView(b)};Sunblock.elementInView=function(b){var a=Sunblock.getElementInViewProportion(b)*100;if(a>=50&&a<=100){return true}else{return false}};Sunblock.getViewportDimensions=function(){return[Sunblock.getViewportWidth(),Sunblock.getViewportHeight()]
};Sunblock.getViewportWidth=function(){var a=0;if(typeof(Sunblock.windowAlias.innerWidth)=="number"){a=Sunblock.windowAlias.innerWidth}else{if(Sunblock.documentAlias.documentElement&&Sunblock.documentAlias.documentElement.clientWidth){a=Sunblock.documentAlias.documentElement.clientWidth}else{if(Sunblock.documentAlias.body&&Sunblock.documentAlias.body.clientWidth){a=Sunblock.documentAlias.body.clientWidth}}}return a};Sunblock.getViewportHeight=function(){var a=0;if(typeof(Sunblock.windowAlias.innerHeight)=="number"){a=Sunblock.windowAlias.innerHeight}else{if(Sunblock.documentAlias.documentElement&&Sunblock.documentAlias.documentElement.clientHeight){a=Sunblock.documentAlias.documentElement.clientHeight}else{if(Sunblock.documentAlias.body&&Sunblock.documentAlias.body.clientHeight){a=Sunblock.documentAlias.body.clientHeight}}}return a};Sunblock.getPageScrollPosition=function(){var b=(Sunblock.windowAlias.pageYOffset||Sunblock.documentAlias.body.scrollTop);var a=(Sunblock.windowAlias.pageXOffset||Sunblock.documentAlias.body.scrollLeft);
return[a,b]};Sunblock.getElementIdDimensions=function(a){var b=Sunblock.documentAlias.getElementById(a);return Sunblock.getElementDimensions(b)};Sunblock.getElementDimensions=function(a){return[a.offsetWidth||1,a.offsetHeight||1]};Sunblock.getElementIdPosition=function(a){var b=Sunblock.documentAlias.getElementById(a);return Sunblock.getElementPosition(b)};Sunblock.getElementPosition=function(b){var c=0,a=0;for(var d=b;d!==null;d=d.offsetParent){c+=d.offsetLeft;a+=d.offsetTop}return[c,a]};Sunblock.getElementIdInViewProportion=function(a){var b=Sunblock.documentAlias.getElementById(a);return Sunblock.getElementInViewProportion(b)};Sunblock.getElementInViewProportion=function(c){var b=Sunblock.getElementDimensions(c),e=b[0],d=b[1];var b=Sunblock.getElementInViewDimensions(c,e,d),f=b[0],a=b[1];return(f*a)/(e*d)};Sunblock.getElementIdInViewDimensions=function(a,d,c){var b=Sunblock.documentAlias.getElementById(a);return Sunblock.getElementInViewDimensions(b,d,c)};Sunblock.getElementInViewDimensions=function(e,i,g){if(typeof i==="undefined"||typeof g==="undefined"){var f=Sunblock.getElementDimensions(e);
i=typeof i!=="undefined"?i:f[0];g=typeof g!=="undefined"?g:f[1]}var f=Sunblock.getViewportDimensions(),j=f[0],c=f[1];var f=Sunblock.getPageScrollPosition(),d=f[0],h=f[1];var f=Sunblock.getElementPosition(e),a=f[0],b=f[1];var k=0;if(b<h){k=g-(h-b)}else{if((b+g)>(h+c)){k=g-((b+g)-(h+c))}else{k=g}}if(k<0){k=0}var l=0;if(a<d){l=i-(d-a)}else{if((a+i)>(d+j)){l=i-((a+i)-(d+j))}else{l=i}}if(l<0){l=0}return[l,k]};Sunblock.hasWordLists=function(a){return !(typeof a==="undefined"||(typeof a.whitelist==="undefined"&&typeof a.blacklist==="undefined"))};Sunblock.getWordListMatches=function(d,c){var a=false,b=false;if(!Sunblock.hasWordLists(d)){return[a,b]}var e=Sunblock.extractWordsFromStartElement(c,"head")+Sunblock.extractWordsFromStartElement(c,"body");if(typeof d.whitelist!=="undefined"){a=Sunblock.matchWords(e,d.whitelist,true)}if(typeof d.blacklist!=="undefined"){b=Sunblock.matchWords(e,d.blacklist,false)}return[a,b]};Sunblock.encodeMatches=function(b,c){var a=Sunblock.safeConcat(b).concat(Sunblock.safeConcat(c));
if(a.length>0){return Sunblock.base64encode(a.join(","))}else{return""}};Sunblock.matchWords=function(g,e,c){var b=Sunblock.unpackWordList(e);if(Sunblock.isEmptyArray(b)){return false}var d;if(c){d="wl"}else{d="bl"}var f=new Array();if(b!==undefined&&b instanceof Array){for(var a=0;a<b.length;a++){ms=g.match(new RegExp(b[a],"gi"));if(ms!==null&&ms instanceof Array){f.push(d+"|"+b[a].toString()+"|"+ms.length)}}}return f};Sunblock.unpackWordList=function(b){var c=new Array();for(var a=0;a<b.length;a++){c[a]=Sunblock.base64decode(b[a])}return c};Sunblock.parseWords=function(c){if(c==null){return""}c=c.replace(/^\s+|\s+$/g,"");c=c.toLowerCase();c=c.replace(/[^a-z 0-9-]+/g,"");var a="";var b=c.split(" ");for(x=0;x<b.length;x++){if(b[x].length>=1){a+=b[x]+" "}}return a};Sunblock.extractWordsFromStartElement=function(c,b){var f="";if(c&&Sunblock.windowAlias.top.frames.length>1){for(var a=0;a<Sunblock.windowAlias.top.frames.length;a++){try{f+=Sunblock.extractWordsFromElement(Sunblock.windowAlias.top.frames[a].document[b],1)
}catch(d){}}}else{f=Sunblock.extractWordsFromElement(Sunblock.documentAlias.getElementsByTagName(b)[0],1)}return f};Sunblock.extractWordsFromElement=function(a,g){var f="";if(a){if(a.nodeType===3&&a.nodeValue&&a.nodeValue.replace(/^\s+|\s+$/g,"")!=""){if(!a.parentNode.nodeName.match(/SCRIPT/)){f+=Sunblock.parseWords(a.nodeValue)}}else{if(a.nodeName=="IFRAME"&&a.name!="ps"){try{f+=Sunblock.extractWordsFromElement(a.contentWindow.document,0)}catch(d){}}else{if(a.nodeName=="META"){if("content" in a){f+=Sunblock.parseWords(a.getAttribute("content"))}}else{if(a.nodeName=="IMG"){if("alt" in a){f+=Sunblock.parseWords(a.getAttribute("alt"))}}}}}var c=0;var b=a.childNodes[c];while(b){f+=Sunblock.extractWordsFromElement(b,g+1);c++;b=a.childNodes[c]}}if(g==1){return" "+f}else{return f}};Sunblock.asRequestUri=function(a){return"//"+a+"/"+Sunblock.apiMajorVersion+"/request"};Sunblock.asFrameId=function(a){return"sb_"+a};Sunblock.retrieveAd=function(a,c,f,e,b,d,g){Sunblock.sendRequest(e,b,true,function(h){var i=new Date().getTime();
Sunblock.whenDocumentReadyOr(Sunblock.skipDocumentReady(h),10,function(){if(h.debug){Sunblock.displayDebugInfo(h)}var j=Sunblock.selectAd(a,c,h,d);Sunblock.renderAd(f,j);g(j,i)})})};Sunblock.skipDocumentReady=function(a){return !Sunblock.hasWordLists(a.wordlists)};Sunblock.selectAd=function(b,f,c,e){var h;var d=Sunblock.getWordListMatches(c.wordlists,e),g=d[0],a=d[1];if(g===false&&a===false){h=null}else{h=(g===false||g.length>0)&&(a===false||a.length==0)}var i=(h===false);return{requestId:c.request_id,deliveryUri:c.delivery_domain,intervalNum:c.interval_num,collectorNum:c.collector_num,wordMatches:Sunblock.encodeMatches(g,a),tagWidth:c.tag_width,tagHeight:c.tag_height,isAltTag:i,wordRule:h,tagText:(i)?c.alt_tag_text:c.tag_text,appendText:c.append_text,slotId:b,frameId:f}};Sunblock.renderFrame=function(b,a,d){var c=Sunblock.documentAlias.createElement("iframe");c.width=1;c.height=1;c.style.border=0;c.style.overflow="hidden";c.scrolling="no";c.id=b;c.name=b;c.onload=function(){c.onload=null;
d(c)};a.parentNode.insertBefore(c,a)};Sunblock.renderAd=function(e,k){var g=e.contentDocument||e.contentWindow.document;g.open();g.writeln("<!doctype>");g.writeln('<html><head><base target="_top"></head><body style="margin: 0; padding: 0">');g.writeln(k.tagText);g.writeln("</body><html>");g.close();e.width=k.tagWidth;e.height=k.tagHeight;if(k.appendText){var a=document.createElement("div");a.innerHTML=k.appendText;var c=a.getElementsByTagName("script");for(var f=0;f<c.length;++f){var h=c[f];var b=document.createElement("script");for(var d=0;d<h.attributes.length;++d){b[h.attributes[d].nodeName]=h.attributes[d].nodeValue}if(h.innerHTML){b.text=h.innerHTML}a.replaceChild(b,h)}e.parentNode.insertBefore(a,e.nextSibling)}};Sunblock.displayDebugInfo=function(a){console.log("########### Sunblock Debug Info ###########");console.log("Ad Decision:",a.decision.decision);var d=a.decision;if(!a.decision.decision){for(var b in d){if(!b.match(/_reason$/)&&b!="decision"&&!d[b]){console.log("failed for "+b);
if(d[b+"_reason"]){for(var c=0;c<d[b+"_reason"].length;++c){var e=d[b+"_reason"][c];console.log("list type: ",e.list_type);console.log("rule type: ",e.rule_type);console.log("failed values: ",e.content.join(","))}}}}}console.log(a)};Sunblock.buildEventUri=function(a,b){return"//"+a+"/"+Sunblock.apiMajorVersion+"/event/"+b};Sunblock.isAdViewThreshold=function(a){switch(a){case 1:case 2:case 3:case 4:case 5:case 10:case 15:case 30:case 60:case 90:case 120:case 150:case 180:case 210:case 240:case 270:case 300:return true;default:return false}};Sunblock.isSenileAdView=function(a){if(a>500){return true}else{return false}};Sunblock.Tracker=function Tracker(W){var c=Sunblock.fixupUrl(Sunblock.documentAlias.domain,Sunblock.windowAlias.location.href,Sunblock.getReferrer()),aI=Sunblock.fixupDomain(c[0]),aZ=c[1],ao=c[2],am="POST",p="web",aD="api.sblk.io",aq=Sunblock.asRequestUri(aD),a2=Sunblock.detectBlindIframe(),ab=[],j=false,ai=Sunblock.newSlotDb(),V=true,X="",aB="",r="",Q,F=Sunblock.documentAlias.title,H="7z|aac|ar[cj]|as[fx]|avi|bin|csv|deb|dmg|doc|exe|flv|gif|gz|gzip|hqx|jar|jpe?g|js|mp(2|3|4|e?g)|mov(ie)?|ms[ip]|od[bfgpst]|og[gv]|pdf|phps|png|ppt|qtm?|ra[mr]?|rpm|sea|sit|tar|t?bz2?|tgz|torrent|txt|wav|wm[av]|wpd||xls|xml|z|zip",ak=[aI],f=[],aa=[],v=[],aj=500,g,y,i,aX="_sb_",m,aY,aT,K,q=63072000000,t=1800000,T=15768000000,A=true,aQ=Sunblock.documentAlias.characterSet||Sunblock.documentAlias.charset,o=Sunblock.navigatorAlias.userLanguage||Sunblock.navigatorAlias.language,aO=aV(),ag=k(),w=ap(),aw=false,ar=false,an,ah,R,N,E,ac,n,I=Sunblock.sha1,av,L,a5,e=aG();
l();function aG(){return{transaction:{},items:[]}}function aU(a6){var a7;if(i){a7=new RegExp("#.*");return a6.replace(a7,"")}return a6}function a3(a6){var a8=new RegExp("^([a-z]+):"),a7=a8.exec(a6);return a7?a7[1]:null}function aH(a8,a6){var a9=a3(a6),a7;if(a9){return a6}if(a6.slice(0,1)==="/"){return a3(a8)+"://"+Sunblock.getHostName(a8)+a6}a8=aU(a8);if((a7=a8.indexOf("?"))>=0){a8=a8.slice(0,a7)}if((a7=a8.lastIndexOf("/"))!==a8.length-1){a8=a8.slice(0,a7+1)}return a8+a6}function al(a9){var a7,a6,a8;for(a7=0;a7<ak.length;a7++){a6=Sunblock.fixupDomain(ak[a7].toLowerCase());if(a9===a6){return true}if(a6.slice(0,1)==="."){if(a9===a6.slice(1)){return true}a8=a9.length-a6.length;if((a8>0)&&(a9.slice(a8)===a6)){return true}}}return false}function J(a7,a6,a8){if(!aT){a4(a7)}}function a4(a6){var a7=new Image(1,1);if(aq===null){throw"No Sunblock delivery domain configured, cannot continue"}a7.onload=function(){};a7.src=aq+a6}function aF(a6){return aX+a6+"."+av}function aP(a6){return Sunblock.getCookie(aF(a6))
}function d(){var a6=aF("testcookie");if(!Sunblock.isDefined(Sunblock.navigatorAlias.cookieEnabled)){Sunblock.setCookie(a6,"1");return Sunblock.getCookie(a6)==="1"?"1":"0"}return Sunblock.navigatorAlias.cookieEnabled?"1":"0"}function af(){av=I((m||aI)+(aY||"/")).slice(0,4)}function aM(){var a6=new Date();an=a6.getTime()}function aC(){P();aM()}function U(){var a6=(Sunblock.documentAlias.compatMode&&Sunblock.documentAlias.compatMode!="BackCompat")?Sunblock.documentAlias.documentElement:Sunblock.documentAlias.body;return[a6.scrollLeft||Sunblock.windowAlias.pageXOffset,a6.scrollTop||Sunblock.windowAlias.pageYOffset]}function ad(){var a7=U();var a6=a7[0];ah=a6;R=a6;var a8=a7[1];N=a8;E=a8}function P(){var a7=U();var a6=a7[0];if(a6<ah){ah=a6}else{if(a6>R){R=a6}}var a8=a7[1];if(a8<N){N=a8}else{if(a8>E){E=a8}}}function aW(a8,a7,a6,ba,a9){Sunblock.setCookie(aF("id"),a8+"."+a7+"."+a6+"."+ba+"."+a9,q,aY,m)}function aE(){var a7=new Date(),a6=Math.round(a7.getTime()/1000),a9=aP("id"),a8;if(a9){a8=a9.split(".");
a8.unshift("0")}else{if(!L){L=I((Sunblock.navigatorAlias.userAgent||"")+(Sunblock.navigatorAlias.platform||"")+JSON2.stringify(aO)+a6).slice(0,16)}a8=["1",L,a6,0,a6,""]}return a8}function M(){var a7=new Date(),a6=a7.getTime();return a6}function G(a6,bp){var bo,a7=new Date(),bd=Math.round(a7.getTime()/1000),br,bh,ba,bk,bm,bc,bb,bn,a9=1024,bs,bf,bj=aF("id"),be=aF("ses"),bl=aE(),bi=aP("ses"),bq=Q||aZ,bg;if(aT){Sunblock.setCookie(bj,"",-1,aY,m);Sunblock.setCookie(be,"",-1,aY,m);return""}br=bl[0];bh=bl[1];bk=bl[2];ba=bl[3];bm=bl[4];bc=bl[5];if(!bi){ba++;bc=bm}var a8=a6.build();a8+=Sunblock.executePluginMethod(bp);return a8}function aJ(a6){var a8=a6||"";var a7=function(ba,bc,bb){if(bc!==undefined&&bc!==null&&bc!==""){var a9=(a8.length>0)?"&":"";a8+=a9+ba+"="+(bb?Sunblock.encodeWrapper(bc):bc)}};return{add:function(a9,ba){a7(a9,ba,true)},addRaw:function(a9,ba){a7(a9,ba,false)},build:function(){return a8}}}function B(a7,ba,a6,a9,a8){var bb=aJ();bb.add("e","se");bb.add("se_ca",a7);bb.add("se_ac",ba);
bb.add("se_la",a6);bb.add("se_pr",a9);bb.add("se_va",a8);request=G(bb,"structEvent");J(request,aj)}function ae(a6,a8){var bc=aJ();bc.add("e","ue");bc.add("ue_na",a6);var bb={};for(var ba in a8){var a7=ba,a9=a8[ba];if(a8.hasOwnProperty(ba)&&Sunblock.isDate(a8[ba])){type=Sunblock.getPropertySuffix(ba);if(!type){type="tms";a7+="$"+type}a9=Sunblock.translateDateValue(a9,type)}bb[a7]=a9}pr_string=JSON2.stringify(bb);if(A){bc.addRaw("ue_px",Sunblock.base64urlencode(pr_string))}else{bc.add("ue_pr",pr_string)}request=G(bc,"unstructEvent");J(request,aj)}function au(ba,a6,a8,a7){var a9=aJ();a9.add("e","ad");a9.add("ad_ba",ba);a9.add("ad_ca",a6);a9.add("ad_ad",a8);a9.add("ad_uid",a7);request=G(a9,"impression");J(request,aj)}function az(ba,a9,bf,bb,a6,bd,a7,a8){var be=aJ();be.add("e","tr");be.add("tr_id",ba);be.add("tr_af",a9);be.add("tr_tt",bf);be.add("tr_tx",bb);be.add("tr_sh",a6);be.add("tr_ci",bd);be.add("tr_st",a7);be.add("tr_co",a8);var bc=G(be,"transaction");J(bc,aj)}function S(a6,bd,a7,ba,a9,bb){var bc=aJ();
bc.add("e","ti");bc.add("ti_id",a6);bc.add("ti_sk",bd);bc.add("ti_na",a7);bc.add("ti_ca",ba);bc.add("ti_pr",a9);bc.add("ti_qu",bb);var a8=G(bc,"transactionItem");J(a8,aj)}function h(a7,ba){aS(a7);var bb=aJ();bb.add("v_client",Sunblock.clientVersion);bb.add("event_type","load");var a6=ai.get(a7.slotId,"requestTime");bb.add("t1",Sunblock.calculateDuration(a6,ba));bb.add("t",Sunblock.calculateDuration(a6));bb.add("interval_num",a7.intervalNum);bb.add("collector_num",a7.collectorNum);bb.add("tag_id",a7.tagId);bb.add("is_alt_tag",a7.isAltTag);bb.add("word_rule",a7.wordRule);bb.add("word_matches",a7.wordMatches);bb.add("is_engaged",ay(a7.slotId));var a9=G(bb,"adLoad");var a8=Sunblock.buildEventUri(a7.deliveryUri,a7.requestId);Sunblock.sendRequest(a8,a9,false,function(){at(a7.slotId)})}function s(a7,bc){var bb=aJ();bb.add("v_client",Sunblock.clientVersion);bb.add("event_type","view");var a6=ai.get(a7.slotId,"requestTime");var ba=ai.get(a7.slotId,"lastResponseTime");bb.add("t1",Sunblock.calculateDuration(a6,ba));
bb.add("t",Sunblock.calculateDuration(a6));bb.add("interval_num",a7.intervalNum);bb.add("collector_num",a7.collectorNum);bb.add("seconds",bc);bb.add("is_engaged",ay(a7.slotId));var a9=G(bb,"adView");var a8=Sunblock.buildEventUri(a7.deliveryUri,a7.requestId);Sunblock.sendRequest(a8,a9,false,function(){at(a7.slotId)})}function at(a6){ai.set(a6,"lastResponseTime",new Date().getTime())}function O(){if(!a2&&!j){window.setInterval(a0,1000);j=true}}function l(){var a7="hidden";if(a7 in document){document.addEventListener("visibilitychange",a6)}else{if((a7="mozHidden") in document){document.addEventListener("mozvisibilitychange",a6)}else{if((a7="webkitHidden") in document){document.addEventListener("webkitvisibilitychange",a6)}else{if((a7="msHidden") in document){document.addEventListener("msvisibilitychange",a6)}else{if("onfocusin" in document){document.onfocusin=document.onfocusout=a6}else{window.onpageshow=window.onpagehide=window.onfocus=window.onblur=a6}}}}}function a6(a9){var ba=true,bb=false,a8={focus:ba,focusin:ba,pageshow:ba,blur:bb,focusout:bb,pagehide:bb};
a9=a9||Sunblock.windowAlias.event;if(a9.type in a8){V=a8[a9.type]}else{V=this[a7]?bb:ba}}}function a0(){var a7,a6,a8,a9;if(V){for(a7=0;a7<ab.length;a7++){a6=ab[a7];a8=ai.get(a6,"ad");if(Sunblock.elementIdInView(a8.frameId)){a9=ai.incr(a6,"inView");if(Sunblock.isAdViewThreshold(a9)){s(a8,a9)}else{if(Sunblock.isSenileAdView(a9)){a(a6)}}}}}}function aS(a6){ai.set(a6.slotId,"ad",a6);ab.push(a6.slotId);O()}function a(a6){Sunblock.removeFromArray(ab,a6)}function ay(a6){if(ai.get(a6,"isEngaged")===true){ai.set(a6,"isEngaged","sent");return true}else{return null}}function aN(a7,bb,bc,a6){ai.set(a7,"requestTime",new Date().getTime());var ba=Sunblock.asFrameId(a7);var bd=[[Sunblock.documentAlias,"click"],[Sunblock.documentAlias,"mouseup"],[Sunblock.documentAlias,"mousedown"],[Sunblock.documentAlias,"mousemove"],[Sunblock.documentAlias,"mousewheel"],[Sunblock.documentAlias,"keypress"],[Sunblock.documentAlias,"keydown"],[Sunblock.documentAlias,"keyup"],[Sunblock.windowAlias,"DOMMouseScroll"],[Sunblock.windowAlias,"scroll"],[Sunblock.windowAlias,"resize"],[Sunblock.windowAlias,"focus"],[Sunblock.windowAlias,"blur"]];
for(var a8=0;a8<bd.length;a8++){var a9=bd[a8][0],be=bd[a8][1];Sunblock.addEventListener(a9,be,function(bf){ai.set(a7,"isEngaged",true);Sunblock.removeEventListener(a9,be,arguments.callee)})}Sunblock.renderFrame(ba,bb,function(bi){var bk=aJ();bk.add("v_client",Sunblock.clientVersion);bk.add("campaign_id",bc);bk.add("ad_id",a6);bk.add("referrer",Sunblock.getReferrer());bk.add("url",Sunblock.getTopPageUri());bk.add("publisher_url",ai.get(a7,"publisherUrl"));bk.add("click_url",ai.get(a7,"clickUrl"));var bj=Sunblock.getElementPosition(bi);bk.add("label",ai.get(a7,"label"));bk.add("tag_x",bj[0]);bk.add("tag_y",bj[1]);bk.add("device_screen_width",Sunblock.screenAlias.width);bk.add("device_screen_height",Sunblock.screenAlias.height);bk.add("device_viewport_width",Sunblock.getViewportWidth());bk.add("device_viewport_height",Sunblock.getViewportHeight());var bf=Sunblock.getPageScrollPosition();bk.add("device_viewport_x",bf[0]);bk.add("device_viewport_y",bf[1]);bk.add("ext_id",ai.get(a7,"extId"));
bk.add("ext_source1",ai.get(a7,"extSource1"));bk.add("ext_source2",ai.get(a7,"extSource2"));bk.add("ext_source3",ai.get(a7,"extSource3"));bk.add("blind_iframe",a2);bk.add("t",Sunblock.calculateDuration(ai.get(a7,"requestTime")));var bg=G(bk,"adRequest");var bh=ai.getOrElse(a7,"requestUri",aq);Sunblock.retrieveAd(a7,ba,bi,bh,bg,a2,h)})}function Z(ba){var a9=Sunblock.fixupTitle(ba||F);var bb=aJ();bb.add("e","pv");bb.add("page",a9);var a8=G(bb,"pageView");J(a8,aj);var a6=new Date();if(g&&y&&!ar){ar=true;ad();Sunblock.addEventListener(Sunblock.documentAlias,"click",aM);Sunblock.addEventListener(Sunblock.documentAlias,"mouseup",aM);Sunblock.addEventListener(Sunblock.documentAlias,"mousedown",aM);Sunblock.addEventListener(Sunblock.documentAlias,"mousemove",aM);Sunblock.addEventListener(Sunblock.documentAlias,"mousewheel",aM);Sunblock.addEventListener(Sunblock.windowAlias,"DOMMouseScroll",aM);Sunblock.addEventListener(Sunblock.windowAlias,"scroll",aC);Sunblock.addEventListener(Sunblock.documentAlias,"keypress",aM);
Sunblock.addEventListener(Sunblock.documentAlias,"keydown",aM);Sunblock.addEventListener(Sunblock.documentAlias,"keyup",aM);Sunblock.addEventListener(Sunblock.windowAlias,"resize",aM);Sunblock.addEventListener(Sunblock.windowAlias,"focus",aM);Sunblock.addEventListener(Sunblock.windowAlias,"blur",aM);an=a6.getTime();setInterval(function a7(){var bc=new Date();if((an+y)>bc.getTime()){if(g<bc.getTime()){b(a9)}}},y)}}function b(a7){var a8=aJ();a8.add("e","pp");a8.add("page",a7);a8.addRaw("pp_mix",ah);a8.addRaw("pp_max",R);a8.addRaw("pp_miy",N);a8.addRaw("pp_may",E);ad();var a6=G(a8,"pagePing");J(a6,aj)}function aL(a7,a6){var a9=aJ();a9.add("e",a6);a9.add("t_url",aU(a7));var a8=G(a9,"link");J(a8,aj)}function aR(a7,a6){if(a7!==""){return a7+a6.charAt(0).toUpperCase()+a6.slice(1)}return a6}function C(bb){var ba,a6,a9=["","webkit","ms","moz"],a8;if(!K){for(a6=0;a6<a9.length;a6++){a8=a9[a6];if(Object.prototype.hasOwnProperty.call(Sunblock.documentAlias,aR(a8,"hidden"))){if(Sunblock.documentAlias[aR(a8,"visibilityState")]==="prerender"){ba=true
}break}}}if(ba){Sunblock.addEventListener(Sunblock.documentAlias,a8+"visibilitychange",function a7(){Sunblock.documentAlias.removeEventListener(a8+"visibilitychange",a7,false);bb()});return}bb()}function z(a8,a7){var a9,a6="(^| )(piwik[_-]"+a7;if(a8){for(a9=0;a9<a8.length;a9++){a6+="|"+a8[a9]}}a6+=")( |$)";return new RegExp(a6)}function aK(a9,a6,ba){if(!ba){return"lnk"}var a8=z(aa,"download"),a7=z(v,"link"),bb=new RegExp("\\.("+H+")([?&#]|$)","i");return a7.test(a9)?"lnk":(a8.test(a9)||bb.test(a6)?"dl":0)}function aA(bb){var a9,a7,a6;while((a9=bb.parentNode)!==null&&Sunblock.isDefined(a9)&&((a7=bb.tagName.toUpperCase())!=="A"&&a7!=="AREA")){bb=a9}if(Sunblock.isDefined(bb.href)){var bc=bb.hostname||Sunblock.getHostName(bb.href),bd=bc.toLowerCase(),a8=bb.href.replace(bc,bd),ba=new RegExp("^(javascript|vbscript|jscript|mocha|livescript|ecmascript|mailto):","i");if(!ba.test(a8)){a6=aK(bb.className,a8,al(bd));if(a6){a8=Sunblock.decodeUrl(a8);aL(a8,a6)}}}}function a1(a6){var a7,a8;a6=a6||Sunblock.windowAlias.event;
a7=a6.which||a6.button;a8=a6.target||a6.srcElement;if(a6.type==="click"){if(a8){aA(a8)}}else{if(a6.type==="mousedown"){if((a7===1||a7===2)&&a8){ac=a7;n=a8}else{ac=n=null}}else{if(a6.type==="mouseup"){if(a7===ac&&a8===n){aA(a8)}ac=n=null}}}}function ax(a7,a6){if(a6){Sunblock.addEventListener(a7,"mouseup",a1,false);Sunblock.addEventListener(a7,"mousedown",a1,false)}else{Sunblock.addEventListener(a7,"click",a1,false)}}function Y(a7){if(!aw){aw=true;var a8,a6=z(f,"ignore"),a9=Sunblock.documentAlias.links;if(a9){for(a8=0;a8<a9.length;a8++){if(!a6.test(a9[a8].className)){ax(a9[a8],a7)}}}}}function ap(){var a9=[navigator.userAgent,[screen.height,screen.width,screen.colorDepth].join("x"),(new Date()).getTimezoneOffset(),Sunblock.hasSessionStorage(),Sunblock.hasLocalStorage()];var a6=[];if(navigator.plugins){for(var ba=0;ba<navigator.plugins.length;ba++){var a7=[];for(var a8=0;a8<navigator.plugins[ba].length;a8++){a7.push([navigator.plugins[ba][a8].type,navigator.plugins[ba][a8].suffixes])}a6.push([navigator.plugins[ba].name+"::"+navigator.plugins[ba].description,a7.join("~")])
}}return Sunblock.murmurhash3_32_gc(a9.join("###")+"###"+a6.sort().join(";"),123412414)}function k(){var a6=jstz.determine();return(typeof(a6)==="undefined")?"":a6.name()}function D(){var a7=Sunblock.windowAlias,a6="inner";if(!("innerWidth" in Sunblock.windowAlias)){a6="client";a7=Sunblock.documentAlias.documentElement||Sunblock.documentAlias.body}return a7[a6+"Width"]+"x"+a7[a6+"Height"]}function u(){var a8=Sunblock.documentAlias.documentElement;var a6=Math.max(a8.clientWidth,a8.offsetWidth,a8.scrollWidth);var a7=Math.max(a8.clientHeight,a8.offsetHeight,a8.scrollHeight);return a6+"x"+a7}function aV(){var a6,a8,a9={pdf:"application/pdf",qt:"video/quicktime",realp:"audio/x-pn-realaudio-plugin",wma:"application/x-mplayer2",dir:"application/x-director",fla:"application/x-shockwave-flash",java:"application/x-java-vm",gears:"application/x-googlegears",ag:"application/x-silverlight"},a7={};if(Sunblock.navigatorAlias.mimeTypes&&Sunblock.navigatorAlias.mimeTypes.length){for(a6 in a9){if(Object.prototype.hasOwnProperty.call(a9,a6)){a8=Sunblock.navigatorAlias.mimeTypes[a9[a6]];
a7[a6]=(a8&&a8.enabledPlugin)?"1":"0"}}}if(typeof navigator.javaEnabled!=="unknown"&&Sunblock.isDefined(Sunblock.navigatorAlias.javaEnabled)&&Sunblock.navigatorAlias.javaEnabled()){a7.java="1"}if(Sunblock.isFunction(Sunblock.windowAlias.GearsFactory)){a7.gears="1"}a7.res=Sunblock.screenAlias.width+"x"+Sunblock.screenAlias.height;a7.cd=screen.colorDepth;a7.cookie=d();return a7}af();return{getUserId:function(){return a5},getDomainUserId:function(){return(aE())[1]},getDomainUserInfo:function(){return aE()},getVisitorId:function(){if(typeof console!=="undefined"){console.log("Sunblock: getVisitorId() is deprecated and will be removed in an upcoming version. Please use getDomainUserId() instead.")}return(loadVisitorIdCookie())[1]},getVisitorInfo:function(){if(typeof console!=="undefined"){console.log("Sunblock: getVisitorInfo() is deprecated and will be removed in an upcoming version. Please use getDomainUserInfo() instead.")}return loadVisitorIdCookie()},setLinkTrackingTimer:function(a6){aj=a6
},setDownloadExtensions:function(a6){H=a6},addDownloadExtensions:function(a6){H+="|"+a6},setDomains:function(a6){ak=Sunblock.isString(a6)?[a6]:a6;ak.push(aI)},setIgnoreClasses:function(a6){f=Sunblock.isString(a6)?[a6]:a6},setReferrerUrl:function(a6){ao=a6},setCustomUrl:function(a6){Q=aH(aZ,a6)},setDocumentTitle:function(a6){F=a6},setDownloadClasses:function(a6){aa=Sunblock.isString(a6)?[a6]:a6},setLinkClasses:function(a6){v=Sunblock.isString(a6)?[a6]:a6},discardHashTag:function(a6){i=a6},setCookieNamePrefix:function(a6){aX=a6},setCookieDomain:function(a6){m=Sunblock.fixupDomain(a6);af()},setCookiePath:function(a6){aY=a6;af()},setVisitorCookieTimeout:function(a6){q=a6*1000},setSessionCookieTimeout:function(a6){t=a6*1000},setReferralCookieTimeout:function(a6){T=a6*1000},setDoNotTrack:function(a7){var a6=Sunblock.navigatorAlias.doNotTrack||Sunblock.navigatorAlias.msDoNotTrack;aT=a7&&(a6==="yes"||a6==="1")},addListener:function(a7,a6){ax(a7,a6)},enableLinkTracking:function(a6){if(Sunblock.hasLoaded){Y(a6)
}else{Sunblock.registeredOnLoadHandlers.push(function(){Y(a6)})}},enableActivityTracking:function(a8,a7){var a6=new Date();g=a6.getTime()+a8*1000;y=a7*1000},killFrame:function(){if(Sunblock.windowAlias.location!==Sunblock.windowAlias.top.location){Sunblock.windowAlias.top.location=Sunblock.windowAlias.location}},redirectFile:function(a6){if(Sunblock.windowAlias.location.protocol==="file:"){Sunblock.windowAlias.location=a6}},setCountPreRendered:function(a6){K=a6},trackLink:function(a7,a6){C(function(){aL(a7,a6)})},displayAd:function(a8,a7,a6,a9){aN(a8,a7,a6,a9)},setDeliveryUrl:function(a6,a7){ai.set(a6,"deliveryUri",a7);ai.set(a6,"requestUri",Sunblock.asRequestUri(a7))},setLabel:function(a7,a6){ai.set(a7,"label",a6)},setClickUrl:function(a6,a7){ai.set(a6,"clickUrl",a7)},setPublisherUrl:function(a6,a7){ai.set(a6,"publisherUrl",a7)},setExtId:function(a7,a6){ai.set(a7,"extId",a6)},setExtSource1:function(a7,a6){ai.set(a7,"extSource1",a6)},setExtSource2:function(a6,a7){ai.set(a6,"extSource2",a7)
},setExtSource3:function(a6,a7){ai.set(a6,"extSource3",a7)},trackPageView:function(a6){C(function(){Z(a6)})},setUserId:function(a6){a5=a6},attachUserId:function(a6){if(typeof console!=="undefined"){console.log("Sunblock: attachUserId() is deprecated and will be removed in an upcoming version. It no longer does anything (because nuid and duid have been separated out).")}},encodeBase64:function(a6){A=a6},trackEvent:function(a7,ba,a6,a9,a8){if(typeof console!=="undefined"){console.log("Sunblock: trackEvent() is deprecated and will be removed in an upcoming version. Please use trackStructEvent() instead.")}B(a7,ba,a6,a9,a8)},trackStructEvent:function(a7,ba,a6,a9,a8){B(a7,ba,a6,a9,a8)},trackUnstructEvent:function(a6,a7){ae(a6,a7)},trackImpression:function(a9,a6,a8,a7){au(a9,a6,a8,a7)},addTrans:function(a6,a9,ba,a8,a7,bd,bb,bc){e.transaction={orderId:a6,affiliation:a9,total:ba,tax:a8,shipping:a7,city:bd,state:bb,country:bc}},addItem:function(a6,bb,a7,a9,a8,ba){e.items.push({orderId:a6,sku:bb,name:a7,category:a9,price:a8,quantity:ba})
},trackTrans:function(){az(e.transaction.orderId,e.transaction.affiliation,e.transaction.total,e.transaction.tax,e.transaction.shipping,e.transaction.city,e.transaction.state,e.transaction.country);for(var a6=0;a6<e.items.length;a6++){var a7=e.items[a6];S(a7.orderId,a7.sku,a7.name,a7.category,a7.price,a7.quantity)}e=aG()}}};Sunblock.build=function(){function b(){var g,j,h;for(g=0;g<arguments.length;g+=1){h=arguments[g];j=h.splice(1,1)[0];if(Sunblock.isString(j)){Sunblock.asyncTracker[j].apply(Sunblock.asyncTracker,h)}else{j.apply(Sunblock.asyncTracker,h)}}}function f(){var g;Sunblock.executePluginMethod("unload");if(Sunblock.expireDateTime){do{g=new Date()}while(g.getTimeAlias()<Sunblock.expireDateTime)}}function d(){var g;if(!Sunblock.hasLoaded){Sunblock.hasLoaded=true;Sunblock.executePluginMethod("load");for(g=0;g<Sunblock.registeredOnLoadHandlers.length;g++){Sunblock.registeredOnLoadHandlers[g]()}}return true}function e(){var h;if(Sunblock.documentAlias.addEventListener){Sunblock.addEventListener(Sunblock.documentAlias,"DOMContentLoaded",function g(){Sunblock.documentAlias.removeEventListener("DOMContentLoaded",g,false);
d()})}else{if(Sunblock.documentAlias.attachEvent){Sunblock.documentAlias.attachEvent("onreadystatechange",function g(){if(Sunblock.documentAlias.readyState==="complete"){Sunblock.documentAlias.detachEvent("onreadystatechange",g);d()}});if(Sunblock.documentAlias.documentElement.doScroll&&Sunblock.windowAlias===Sunblock.windowAlias.top){(function g(){if(!Sunblock.hasLoaded){try{Sunblock.documentAlias.documentElement.doScroll("left")}catch(i){setTimeout(g,0);return}d()}}())}}}if((new RegExp("WebKit")).test(Sunblock.navigatorAlias.userAgent)){h=setInterval(function(){if(Sunblock.hasLoaded||/loaded|complete/.test(Sunblock.documentAlias.readyState)){clearInterval(h);d()}},10)}Sunblock.addEventListener(Sunblock.windowAlias,"load",d,false)}function a(){return{push:b}}Sunblock.addEventListener(Sunblock.windowAlias,"beforeunload",f,false);e();Date.prototype.getTimeAlias=Date.prototype.getTime;Sunblock.asyncTracker=new Sunblock.Tracker();for(var c=0;c<_sblq.length;c++){b(_sblq[c])}_sblq=new a();return{addPlugin:function(g,h){Sunblock.plugins[g]=h
},getTrackerCf:function(g){return new Sunblock.Tracker({cf:g})},getTrackerUrl:function(g){return new Sunblock.Tracker({url:g})},getAsyncTracker:function(){return Sunblock.asyncTracker}}};(function(){var a=Sunblock.build();for(prop in a){if(a.hasOwnProperty(prop)){if(Sunblock[prop]===undefined){Sunblock[prop]=a[prop]}}}}());
